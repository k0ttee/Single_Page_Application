####################
# Localhost        #
# Website Server   #
# The Main Backend #
####################

#HTTP & HTTP_WWW → HTTPS
server{
        listen 80;
        server_name localhost www.localhost;
        return 301 https://localhost$request_uri;
}

#HTTPS_WWW → HTTPS
server {
        listen 443 ssl http2;
        server_name www.localhost;
        ssl_certificate     /etc/letsencrypt/live/www.localhost/fullchain.pem;
        ssl_certificate_key /etc/letsencrypt/live/www.localhost/privkey.pem;
        return 301 https://localhost$request_uri;
}

#HTTPS
server {
        server_name localhost;
        root /mnt/c/Users/Азъ/wsl-localhost/localhost;

        listen 443 ssl http2;
        #listen [::]:443 ssl http2 ipv6only=on;

        index index.php;

        expires 0;
        etag off;

        location / {
                include snippets/fastcgi-php.conf;
                fastcgi_pass unix:/run/php/php7.4-fpm.sock;
        }

        ssl_certificate     /etc/letsencrypt/live/localhost/fullchain.pem;
        ssl_certificate_key /etc/letsencrypt/live/localhost/privkey.pem;
}
